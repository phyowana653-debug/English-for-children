<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phyo Gyi Gamer - Ultimate Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Padauk:wght@400;700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --primary: #00f2ff; --accent: #7000ff; --danger: #ff0055; --success: #00ff88; --bg: #020617;
        }

        body { 
            font-family: 'Padauk', 'Rajdhani', sans-serif; margin: 0; background: var(--bg); color: white; 
            display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden;
        }

        #bg-canvas, #confetti-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        #bg-canvas { z-index: -1; }
        #confetti-canvas { z-index: 100; }

        .container {
            width: 95%; max-width: 420px; background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(25px); border: 2px solid var(--primary);
            padding: 25px; border-radius: 35px; box-shadow: 0 0 60px rgba(0, 242, 255, 0.15);
            text-align: center; position: relative; z-index: 10;
        }

        .screen { display: none; }
        .active { display: block; animation: powerOn 0.5s ease-out; }
        @keyframes powerOn { 0% { transform: scale(0.95); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        @keyframes blinkTarget {
            0%, 100% { opacity: 0; transform: scale(0.3); }
            50% { opacity: 1; transform: scale(1); }
        }

        h1 { font-family: 'Orbitron', sans-serif; font-size: 26px; letter-spacing: 2px; text-shadow: 0 0 20px var(--primary); margin: 0; }
        .owner-tag { font-size: 12px; color: var(--danger); font-family: 'Orbitron'; letter-spacing: 3px; margin-bottom: 20px; display: block; }

        .stat-card { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .stat-label { font-size: 11px; color: #aaa; display: block; }
        .stat-val { font-size: 18px; font-weight: 700; color: var(--primary); }

        #game-area { 
            width: 100%; height: 320px; background: rgba(0,0,0,0.5); border-radius: 20px; 
            border: 1px solid rgba(255,255,255,0.1); position: relative; overflow: hidden;
            display: flex; flex-direction: column; justify-content: center; align-items: center; margin: 15px 0;
        }

        button { width: 100%; padding: 14px; margin: 8px 0; border: none; border-radius: 15px; font-size: 16px; font-weight: 700; cursor: pointer; transition: 0.3s; font-family: 'Padauk'; }
        .btn-main { background: transparent; color: var(--primary); border: 2px solid var(--primary); text-transform: uppercase; }
        .btn-main:hover { background: var(--primary); color: #000; box-shadow: 0 0 25px var(--primary); transform: translateY(-2px); }

        #target { 
            position: absolute; border-radius: 50%; cursor: pointer; border: 3px solid #fff; 
            box-shadow: 0 0 20px var(--primary);
            animation: blinkTarget 1.5s infinite ease-in-out;
        }

        input { width: 70%; padding: 12px; border-radius: 12px; border: 2px solid var(--primary); background: rgba(0,0,0,0.5); color: white; font-size: 28px; text-align: center; outline: none; margin-bottom: 10px; }
        
        .hs-board { background: rgba(255,255,255,0.03); padding: 12px; border-radius: 15px; margin-bottom: 20px; border: 1px dashed rgba(255,255,255,0.1); }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>
    <canvas id="confetti-canvas"></canvas>

    <div class="container">
        <div id="menu" class="screen active">
            <h1>PHYO GYI GAMER</h1>
            <span class="owner-tag">OFFICIAL HUB</span>

            <div class="hs-board">
                <div style="font-size: 12px; color: #888; margin-bottom: 5px;">üèÜ Hall of Fame (·ÄÖ·Ä∂·ÄÅ·Äª·Ä≠·Äî·Ä∫·Äô·Äª·Ä¨·Ä∏)</div>
                <div style="display:flex; justify-content: space-around; font-size: 13px;">
                    <div>üî¢ <span id="hs-guess">0</span></div>
                    <div>üéØ <span id="hs-tap">0</span></div>
                    <div>üé® <span id="hs-color">0</span></div>
                </div>
            </div>
            <button class="btn-main" onclick="initGuessGame()">üî¢ ·ÄÇ·Äè·Äî·Ä∫·Ä∏·Äô·Äæ·Äî·Ä∫·Ä∏·Äê·Äô·Ä∫·Ä∏</button>
            <button class="btn-main" onclick="initTapGame()" style="border-color:var(--accent); color:var(--accent)">üéØ ·Ä°·Äô·Äº·Äî·Ä∫·Äî·Äæ·Ä≠·Äï·Ä∫·Äê·Äô·Ä∫·Ä∏ (Blink)</button>
            <button class="btn-main" onclick="initColorGame()" style="border-color:var(--success); color:var(--success)">üé® ·Ä°·Äõ·Ä±·Ä¨·ÄÑ·Ä∫·Äõ·ÄΩ·Ä±·Ä∏·Äê·Äô·Ä∫·Ä∏</button>
        </div>

        <div id="game-screen" class="screen">
            <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:10px;">
                <div class="stat-card"><span class="stat-label">·Ä°·ÄÜ·ÄÑ·Ä∑·Ä∫</span><span class="stat-val" id="display-lvl">1</span></div>
                <div class="stat-card"><span class="stat-label">·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫</span><span class="stat-val" id="display-time">10</span></div>
                <div class="stat-card"><span class="stat-label" id="label-score">·Äõ·Äô·Äæ·Äê·Ä∫</span><span class="stat-val" id="display-score">0</span></div>
            </div>
            <div id="game-area"></div>
            <div id="msg-box" style="height:25px; color:var(--primary); font-size:14px; margin-bottom:5px;"></div>
            <button onclick="goHome()" style="background:transparent; color:#666; font-size:13px;">‚ùå ·Äô·ÄÜ·Ä±·Ä¨·Ä∑·Äê·Ä±·Ä¨·Ä∑·Äï·Ä´</button>
        </div>
    </div>

    <script>
        // --- 1. Audio & Confetti ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        let bgmNode = null;
        const confCanvas = document.getElementById('confetti-canvas');
        const confCtx = confCanvas.getContext('2d');
        let particles = [];

        function playBGM() {
            if (bgmNode) return;
            bgmNode = audioCtx.createOscillator(); const gain = audioCtx.createGain();
            bgmNode.type = 'triangle'; bgmNode.frequency.setValueAtTime(110, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.01, audioCtx.currentTime);
            bgmNode.connect(gain); gain.connect(audioCtx.destination);
            bgmNode.start();
            setInterval(() => {
                const f = [110, 123, 146][Math.floor(Math.random()*3)];
                bgmNode.frequency.exponentialRampToValueAtTime(f, audioCtx.currentTime + 0.1);
            }, 1000);
        }

        function playSfx(f, t, d, v=0.08) {
            const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
            o.type = t; o.frequency.setValueAtTime(f, audioCtx.currentTime);
            g.gain.setValueAtTime(v, audioCtx.currentTime); o.connect(g); g.connect(audioCtx.destination);
            o.start(); o.stop(audioCtx.currentTime + d);
        }

        function startConfetti() {
            for(let i=0; i<80; i++) {
                particles.push({ x: Math.random()*confCanvas.width, y: -20, r: Math.random()*6+4, d: Math.random()*10, color: `hsl(${Math.random()*360},100%,50%)`, tiltAngle: 0, tiltAngleInc: Math.random()*0.1+0.05 });
            }
        }

        function updateParticles() {
            confCtx.clearRect(0, 0, confCanvas.width, confCanvas.height);
            particles.forEach((p, i) => {
                p.y += 3; p.tiltAngle += p.tiltAngleInc;
                confCtx.beginPath(); confCtx.lineWidth = p.r; confCtx.strokeStyle = p.color;
                confCtx.moveTo(p.x + Math.sin(p.tiltAngle)*10, p.y);
                confCtx.lineTo(p.x, p.y + 10); confCtx.stroke();
                if (p.y > confCanvas.height) particles.splice(i, 1);
            });
            requestAnimationFrame(updateParticles);
        }
        confCanvas.width = window.innerWidth; confCanvas.height = window.innerHeight;
        updateParticles();

        // --- 2. Game Core ---
        let timer, timeLeft, level, score, secretNum, gameActive = false, currentGame = "";
        const colors = [{name: "·Ä°·Äî·ÄÆ", code: "#ff0055"}, {name: "·Ä°·Äï·Äº·Ä¨", code: "#00f2ff"}, {name: "·Ä°·ÄÖ·Ä≠·Äô·Ä∫·Ä∏", code: "#00ff88"}, {name: "·Ä°·Äù·Ä´", code: "#ffff00"}];

        function showGame(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            playBGM(); currentGame = type;
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('game-screen').classList.add('active');
            gameActive = true; updateUI();
        }

        function goHome() { 
            clearInterval(timer); gameActive = false; 
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active')); 
            document.getElementById('menu').classList.add('active'); 
            updateUI();
        }

        function endGame(m) {
            gameActive = false; clearInterval(timer); playSfx(100, 'sawtooth', 0.5);
            let final = (currentGame === 'guess') ? level : (level * 10 + score);
            let key = 'hs_' + currentGame;
            if (final > (localStorage.getItem(key) || 0)) {
                localStorage.setItem(key, final); startConfetti();
                alert("·ÄÖ·Ä∂·ÄÅ·Äª·Ä≠·Äî·Ä∫·Äû·ÄÖ·Ä∫·Äê·ÄÑ·Ä∫·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·Äï·Äº·ÄÆ Phyo Gyi!\n" + m + "\n·Äõ·Äô·Äæ·Äê·Ä∫: " + final);
            } else alert(m + "\n·Äõ·Äô·Äæ·Äê·Ä∫: " + final);
            goHome();
        }

        function startTimer(d) {
            timeLeft = d; clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--; document.getElementById('display-time').innerText = timeLeft;
                if(timeLeft <= 0) endGame("‚è∞ ·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫·ÄÄ·ÄØ·Äî·Ä∫·Äû·ÄΩ·Ä¨·Ä∏·Äï·Äº·ÄÆ!");
            }, 1000);
        }

        // --- ·ÄÇ·Ä≠·Äô·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏ ---
        function initGuessGame() {
            showGame('guess'); level = 1; score = 5; secretNum = Math.floor(Math.random()*50)+1;
            document.getElementById('label-score').innerText = "·Ä°·Äû·ÄÄ·Ä∫";
            document.getElementById('game-area').innerHTML = `<input type="number" id="guess-input" placeholder="?"><button class="btn-main" onclick="checkGuess()">·ÄÅ·Äî·Ä∑·Ä∫·Äô·Äæ·Äî·Ä∫·Ä∏·Äô·Äö·Ä∫</button>`;
            startTimer(40);
        }
        function checkGuess() {
            let i = document.getElementById('guess-input'); let v = parseInt(i.value);
            if(v === secretNum) { 
                playSfx(800, 'sine', 0.2); startConfetti(); level++; score = 5; timeLeft += 10;
                secretNum = Math.floor(Math.random()*(50 + level*10))+1;
                document.getElementById('msg-box').innerText = "·Äô·Äæ·Äî·Ä∫·Äê·Äö·Ä∫ Phyo Gyi! Level " + level;
            } else { 
                score--; playSfx(150, 'square', 0.2); 
                document.getElementById('msg-box').innerText = v > secretNum ? "·Ä°·Äõ·Äô·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏·Äî·Ä±·Äê·Äö·Ä∫ ‚Üì" : "·Ä°·Äõ·Äô·Ä∫·Ä∏·Äî·Ää·Ä∫·Ä∏·Äî·Ä±·Äê·Äö·Ä∫ ‚Üë";
                if(score <= 0) endGame("üíÄ ·Ä°·Äû·ÄÄ·Ä∫·ÄÄ·ÄØ·Äî·Ä∫·Äï·Äº·ÄÆ!"); 
            }
            i.value = ""; updateUI();
        }

        function initTapGame() {
            showGame('tap'); level = 1; score = 0;
            document.getElementById('label-score').innerText = "·Äî·Äæ·Ä≠·Äï·Ä∫·ÄÅ·Äª·ÄÄ·Ä∫";
            document.getElementById('game-area').innerHTML = `<div id="target" onclick="hitTap()"></div>`;
            startTimer(15); moveTarget();
        }
        function hitTap() {
            playSfx(1000, 'sine', 0.05); score++;
            if(score >= 10) { level++; score = 0; timeLeft += 5; startConfetti(); playSfx(1200, 'sine', 0.2); }
            moveTarget(); updateUI();
        }
        function moveTarget() {
            const t = document.getElementById('target');
            let speed = Math.max(0.4, 1.5 - (level * 0.1));
            t.style.animation = 'none'; t.offsetHeight; 
            t.style.animation = `blinkTarget ${speed}s infinite ease-in-out`;
            let size = Math.max(35, 65 - (level * 2));
            t.style.width = t.style.height = size + 'px';
            t.style.left = Math.random() * 80 + "%"; t.style.top = Math.random() * 80 + "%";
            t.style.background = `var(--primary)`;
        }

        function initColorGame() {
            showGame('color'); level = 1; score = 0;
            document.getElementById('label-score').innerText = "·Äõ·Äô·Äæ·Äê·Ä∫";
            nextColor(); startTimer(20);
        }
        function nextColor() {
            const rt = colors[Math.floor(Math.random()*4)]; const rc = colors[Math.floor(Math.random()*4)];
            document.getElementById('game-area').innerHTML = `
                <div style="font-size:45px; font-weight:900; color:${rc.code}; margin-bottom:25px; text-shadow:0 0 10px ${rc.code}">${rt.name}</div>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; width:90%;">
                    ${colors.map(c => `<button style="height:60px; background:${c.code}; border-radius:15px; border:none;" onclick="checkColor('${c.code}', '${rc.code}')"></button>`).join('')}
                </div>`;
        }
        function checkColor(clicked, correct) {
            if(clicked === correct) { 
                playSfx(1200, 'sine', 0.05); score++; 
                if(score >= 10) { level++; score=0; timeLeft+=5; startConfetti(); } 
                nextColor(); updateUI(); 
            } else endGame("‚ùå ·Äô·Äæ·Ä¨·Ä∏·Äû·ÄΩ·Ä¨·Ä∏·Äï·Äº·ÄÆ!");
        }

        function updateUI() {
            document.getElementById('display-lvl').innerText = level;
            document.getElementById('display-time').innerText = timeLeft;
            document.getElementById('display-score').innerText = score;
            document.getElementById('hs-guess').innerText = localStorage.getItem('hs_guess') || 0;
            document.getElementById('hs-tap').innerText = localStorage.getItem('hs_tap') || 0;
            document.getElementById('hs-color').innerText = localStorage.getItem('hs_color') || 0;
        }

        window.onload = updateUI;
    </script>
</body>
</html>
